{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 8179ec855acc73c16a3e","webpack:///external \"preact\"","webpack:///external \"cheerio\"","webpack:///external \"node-fetch\"","webpack:///./components/AppShell.jsx","webpack:///./components/Hello.jsx","webpack:///./components/PageTemplate.jsx","webpack:///./components/SideNavigation.jsx","webpack:///./components/TopNavigation.jsx","webpack:///./server/connectors/wiki.js","webpack:///./server/pages/navigationPane.js","webpack:///./components/Components.jsx","webpack:///./components/BreadcrumbBar.jsx"],"names":["AppShell","render","props","state","titleBar","title","children","Hello","asyncProperties","PageTemplate","navigation","ancestors","message","StandardPage","SideNavigation","navigationPane","require","then","html","__html","cheerio","fetch","BASE_URL","REST_URL","SEARCH_URL","HOME_PAGE_TITLE","LINKS_PLACEHOLDER","labelUrlRegex","RegExp","pageUrlRegex","viewpageUrlRegex","mapPageTitleToSiteUrl","escapePageTitle","replace","getTitleForPageWithId","pageId","query","response","json","labelToSiteUrl","label","pageTitleToSiteUrl","escaped","replacePlaceholderWithLinks","linksHtml","placeholder","rewriteElementAttribute","$element","attributeName","attributeValue","attr","labelUrlMatch","exec","rewritten","pageUrlMatch","viewpageUrlMatch","rewriteHtml","$","load","each","index","element","text","trim","isInternalNote","startsWith","endsWith","remove","unescapePageTitle","escapedPageTitle","wikiPageWithTitle","console","log","pageJson","results","Array","wikiBody","body","view","value","module","exports","wiki","NAVIGATION_CACHE_DURATION","navigationTimestamp","cachedNavigationHtml","needsRefresh","Date","now","getNavigationFromWiki","Promise","resolve","wikiResults","wikiPageJson","rewrittenHtml","li","$li","$a","navigationPaneHtml","BreadcrumbBar","breadcrumbs","map","ancestor","siteUrl"],"mappings":"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","file":"server.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"preact\"), require(\"cheerio\"), require(\"node-fetch\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"preact\", \"cheerio\", \"node-fetch\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"preact\"), require(\"cheerio\"), require(\"node-fetch\")) : factory(root[\"preact\"], root[\"cheerio\"], root[\"node-fetch\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8179ec855acc73c16a3e","module.exports = require(\"preact\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"preact\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"cheerio\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cheerio\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"node-fetch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-fetch\"\n// module id = 2\n// module chunks = 0","import { Component, h } from 'preact'; // jshint ignore:line\n\nexport default class AppShell extends Component {\n\n  render(props, state) {\n\n    const titleBar = props.titleBar ||\n        props.title ?\n          `${props.title} - Presterity` :\n          '';\n\n    return (\n      <html lang=\"en\">\n        <head>\n          <meta charset=\"utf-8\"/>\n          <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\"/>\n          <title>{titleBar}</title>\n          <link rel=\"stylesheet\" href=\"/static/main.css\"/>\n          <link rel=\"shortcut icon\" href=\"/static/favicon.ico\" type=\"image/x-icon\" />\n          <link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"/static/appIcon.png\" />\n          <link rel=\"manifest\" href=\"/static/manifest.json\" />\n          <meta name=\"google-site-verification\" content=\"4TmUwdRDIEbTE65Bw8HwEyVZqJthy2MvT0S327h_Gdg\" />\n          <meta property=\"og:title\" content=\"${title}\" />\n          <meta property=\"og:url\" content=\"${url}\" />\n          <meta property=\"og:image\" content=\"${baseUrl}/static/facebookShare.png\" />\n        </head>\n        <body>\n          <div id=\"root\">\n            {props.children}\n          </div>\n        </body>\n      </html>\n    );\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/AppShell.jsx","import { Component, h } from 'preact'; // jshint ignore:line\nimport PageTemplate from './PageTemplate';\n\n\nexport default class Hello extends Component {\n\n  static get asyncProperties() {\n    return PageTemplate.asyncProperties;\n  }\n\n  render(props, state) {\n    return (\n      <PageTemplate\n          title={props.title}\n          navigation={props.navigation}\n          ancestors={props.ancestors}>\n        <p>{props.message}</p>\n      </PageTemplate>\n    );\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./components/Hello.jsx","import { Component, h } from 'preact'; // jshint ignore:line\nimport BreadcrumbBar from './BreadcrumbBar';\nimport SideNavigation from './SideNavigation';\nimport TopNavigation from './TopNavigation';\n\n\n/**\n * Template for a standard page on the site.\n */\nexport default class StandardPage extends Component {\n\n  static get asyncProperties() {\n    return SideNavigation.asyncProperties;\n  }\n\n  render(props, state) {\n    return (\n      <div class=\"pageWrapper\">\n        <SideNavigation navigation={props.navigation}/>\n        <div class=\"main\">\n          <TopNavigation/>\n          <div class=\"breadcrumbBar\">\n            <div class=\"gutter\"></div>\n            <BreadcrumbBar ancestors={props.ancestors}/>\n            <div class=\"gutter\"></div>\n          </div>\n          <div class=\"articleContainer\">\n            <div class=\"gutter\"></div>\n            <article class=\"wikiContent\">\n              <img id=\"mobileHomeLogo\" src=\"/static/appIcon.png\" alt=\"Presterity logo: a torch and a book\"/>\n              <h1 class=\"pageTitle\">{props.title}</h1>\n              <div>\n                {props.children}\n              </div>\n              <footer>\n                <p>tweetHtml...</p>\n                footer...\n                <p id=\"daysRemainingMessage\">\n                  daysRemainingMessage...\n                </p>\n              </footer>\n            </article>\n            <div class=\"gutter\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/PageTemplate.jsx","import { Component, h } from 'preact'; // jshint ignore:line\nconst navigationPane = require('../server/pages/navigationPane');\n\n\n/**\n * Side navigation pane\n */\nexport default class SideNavigation extends Component {\n\n  static get asyncProperties() {\n    return navigationPane()\n    .then(html => {\n      return {\n        navigation: html\n      };\n    });\n  }\n\n  render(props, state) {\n    return (\n      <nav class=\"sideNavigation\">\n        <div id=\"logoBlock\">\n          <a id=\"linkHome\" href=\"/\">\n            <img id=\"logo\" src=\"/static/presterity.png\" alt=\"Presterity logo: a torch and a book\"/>\n          </a>\n        </div>\n        <p id=\"tableOfContentsCaption\">\n          TABLE <em>of</em> CONTENTS\n        </p>\n        <div id=\"captionSeparatorContainer\">\n          <div id=\"captionSeparator\"></div>\n        </div>\n        <div class=\"sideNavigation\" dangerouslySetInnerHTML={{ __html: props.navigation }} />\n      </nav>\n    );\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/SideNavigation.jsx","import { h } from 'preact'; // jshint ignore:line\n\n\n/**\n * Top navigation links\n */\nexport default (props) => (\n  <header id=\"topNavigation\">\n    <div class=\"gutter\"></div>\n    <div id=\"topLinks\">\n      <a id=\"linkAbout\" href=\"/About\">ABOUT</a>\n      <a id=\"linkVolunteering\" href=\"/Volunteering\">VOLUNTEER</a>\n      <a id=\"linkSearch\" href=\"/search\">SEARCH</a>\n      <a id=\"linkSubmissions\" href=\"/Submissions\">SUBMIT NEWS</a>\n    </div>\n    <div class=\"gutter\"></div>\n  </header>\n);\n\n\n\n// WEBPACK FOOTER //\n// ./components/TopNavigation.jsx","/*\n * The site's connection to, and representation of, the Atlassian Confluence wiki.\n *\n * The general principle is that this module isolates anything specific to\n * Confluence. If we were to change to a different wiki back-end, this module\n * would get replaced, but much of the rest of the server could stay the same.\n */\n\n\n// Cheerio is a server-side HTML jQuery-style parser/manipulator.\nconst cheerio = require('cheerio');\nconst fetch = require('node-fetch');\n\nconst BASE_URL = 'https://presterity.atlassian.net';\nconst REST_URL = `${BASE_URL}/wiki/rest/api/content`;\nconst SEARCH_URL = `${REST_URL}/search?cql=space=DB and `;\n\nconst HOME_PAGE_TITLE = 'Home';\nconst LINKS_PLACEHOLDER = `(Topic links will automatically appear here.)`;\n\n// Replace links to label pages with equivalent site URLs.\nconst labelUrlRegex = new RegExp(`${BASE_URL}/wiki/label/DB/([^\"]+)`);\n\n// Replace links to regular pages with equivalent site URLs.\nconst pageUrlRegex = /\\/wiki\\/display\\/DB\\/([^\"]+)/;\n\n// Replace links to viewpage.action URLs.\n// Confluence uses such links if a page's title contains odd characters.\nconst viewpageUrlRegex = /\\/wiki\\/pages\\/viewpage\\.action\\?pageId=(\\d+)/;\n\n\n// Map certain wiki page titles -> site URLs by hand.\nconst mapPageTitleToSiteUrl = {\n  'About': '/About',\n  'Development+volunteers': '/Volunteering/Development+volunteers',\n  'Home': '/',\n  'Submissions': '/Submissions',\n  'Volunteering': '/Volunteering',\n  'Code+of+Conduct': '/Volunteering/Code+of+Conduct'\n};\n\n\n/*\n * Format a page title for use in a wiki URL.\n */\nfunction escapePageTitle(title) {\n  return title.replace(/ /g, '+');\n}\n\n/*\n * Return a promise for the title for the page with the given ID.\n */\nfunction getTitleForPageWithId(pageId) {\n  const query = `${REST_URL}/${pageId}`;\n  return fetch(query)\n  .then(response => response.json())\n  .then(json => {\n    const title = escapePageTitle(json.title);\n    return title;\n  });\n}\n\n/*\n * Return the site URL for the label page for the given label.\n */\nfunction labelToSiteUrl(label) {\n  // Use hand-mapped URL if it exists.\n  return `/reference/label/${label}`;\n}\n\n/*\n * Return the site URL for the regular page with the given title.\n */\nfunction pageTitleToSiteUrl(title) {\n  // Use hand-mapped URL if it exists.\n  // All other pages are presented in the \"/reference\" area of the site.\n  const escaped = escapePageTitle(title);\n  return mapPageTitleToSiteUrl[escaped] || `/reference/${escaped}`;\n}\n\nfunction replacePlaceholderWithLinks(html, linksHtml) {\n  const placeholder = `<em>${LINKS_PLACEHOLDER}</em>`;\n  return html.replace(placeholder, linksHtml);\n}\n\n/*\n * Rewrite the indicated attribute of the given element if necessary.\n */\nfunction rewriteElementAttribute($element, attributeName) {\n\n  const attributeValue = $element.attr(attributeName);\n\n  const labelUrlMatch = labelUrlRegex.exec(attributeValue);\n  if (labelUrlMatch) {\n    const label = labelUrlMatch[1];\n    const rewritten = labelToSiteUrl(label);\n    $element.attr(attributeName, rewritten);\n    return; // No more processing necessary.\n  }\n\n  const pageUrlMatch = pageUrlRegex.exec(attributeValue);\n  if (pageUrlMatch) {\n    const title = pageUrlMatch[1];\n    const rewritten = pageTitleToSiteUrl(title);\n    $element.attr(attributeName, rewritten);\n    return;\n  }\n\n  const viewpageUrlMatch = viewpageUrlRegex.exec(attributeValue);\n  if (viewpageUrlMatch) {\n    const pageId = viewpageUrlMatch[1];\n    const rewritten = `/reference/id/${pageId}`;\n    $element.attr(attributeName, rewritten);\n  }\n}\n\n// Rewrite HTML for public consumption.\nfunction rewriteHtml(html) {\n  const $ = cheerio.load(html); // Parse HTML\n\n  // Rewrite wiki-relative links in `href` attributes.\n  $('a[href]').each((index, element) => {\n    rewriteElementAttribute($(element), 'href');\n  });\n\n  // Remove internal project notes.\n  // These are indicated as `em` (italics) nodes that begin and end with\n  // parentheses.\n  $('em').each((index, element) => {\n    const $element = $(element);\n    const text = $element.text().trim();\n    if (text === LINKS_PLACEHOLDER) {\n      // Leave links placeholder alone; it'll be handled separately.\n      return;\n    }\n    const isInternalNote = text.startsWith('(') && text.endsWith(')');\n    if (isInternalNote) {\n      $element.remove();\n    }\n  });\n\n  return $.html(); // Return rewritten HTML\n}\n\nfunction unescapePageTitle(escapedPageTitle) {\n  return escapedPageTitle.replace(/\\+/g, ' ');\n}\n\n// Return a promise for the wiki page with the given title.\n// The result is a JSON structured returned by Confluence. Wiki-relative paths\n// in the result will be modified to refer to URLs on our site instead.\nfunction wikiPageWithTitle(title) {\n  const query = `${REST_URL}?spaceKey=DB&title=${title}&expand=space,ancestors,body.view`;\n  console.log(`Page: ${query}`);\n  return fetch(query)\n  .then(response => response.json())\n  .then(json => {\n\n    // Usually we get a single result, but under some conditions (can't recall\n    // which) it's an array.\n    const pageJson = json.results instanceof Array ?\n      json.results[0] :\n      json;\n\n    if (!pageJson) {\n      return null;\n    }\n\n    const ancestors = pageJson.ancestors;\n    const title = pageJson.title;\n    const wikiBody = pageJson.body.view.value;\n\n    // The body will include link which are relative to the wiki.\n    // We fix those up so they refer to URLs on our site instead.\n    const body = rewriteHtml(wikiBody);\n\n    return { ancestors, body, title };\n  });\n}\n\n\nmodule.exports = {\n  BASE_URL,\n  escapePageTitle,\n  getTitleForPageWithId,\n  HOME_PAGE_TITLE,\n  labelToSiteUrl,\n  pageTitleToSiteUrl,\n  replacePlaceholderWithLinks,\n  REST_URL,\n  rewriteHtml,\n  SEARCH_URL,\n  unescapePageTitle,\n  wikiPageWithTitle\n};\n\n\n\n// WEBPACK FOOTER //\n// ./server/connectors/wiki.js","const cheerio = require('cheerio');\nconst fetch = require('node-fetch');\nconst wiki = require('../connectors/wiki');\n\n\n// Time in milliseconds we should cache the navigation.\nconst NAVIGATION_CACHE_DURATION = 5 * 60 * 1000; // 5 minutes\n\n// The Date.now() timestamp of our last request for the navgation.\nlet navigationTimestamp = 0;\n\n// The cached navigation HTML.\nlet cachedNavigationHtml;\n\n\n/*\n * Return a promise for the HTML that should be used in the navigation pane.\n *\n * The content for the pane is maintained on a special page on the wiki with\n * the title \"Navigation\". That page isn't directly accessible through the\n * site navigation, and is only used here to construct the navigation UI.\n *\n * Because the navigation outline doesn't change often, we cache the result for\n * a period before asking for it again. The same navigation pane is shared\n * across all pages that use the pane.\n */\nmodule.exports = () => {\n  const needsRefresh = cachedNavigationHtml == null ||\n      (Date.now() - navigationTimestamp) > NAVIGATION_CACHE_DURATION;\n  if (needsRefresh) {\n    // Get navigation from server.\n    return getNavigationFromWiki()\n    .then(html => {\n      cachedNavigationHtml = html;\n      return html;\n    });\n  } else {\n    // Return cached result.\n    return Promise.resolve(cachedNavigationHtml);\n  }\n};\n\n\n// Returns a promise to get the navigation HTML from the wiki.\nfunction getNavigationFromWiki() {\n  const title = 'Navigation';\n  const query = `${wiki.REST_URL}?spaceKey=DB&title=${title}&expand=body.view`;\n  console.log(`Navigation: ${query}`);\n  return fetch(query)\n  .then(response => response.json())\n  .then(wikiResults => {\n    navigationTimestamp = Date.now(); // Note the time we got this response.\n\n    const wikiPageJson = wikiResults.results[0];\n    const body = wikiPageJson.body.view.value;\n\n    // Map wiki-relative URLs to our own routes.\n    const rewrittenHtml = wiki.rewriteHtml(body);\n\n    // For each list item in the navigation pane, add an attribute on it that\n    // will help us reflect the user's current position in the outline using\n    // styling applied with CSS that matches that attribute. The goal of this\n    // is to avoid having to update the navigation links for individual pages.\n    const $ = cheerio.load(rewrittenHtml); // Parse HTML\n    // Find all list items.\n    $('li').each((index, li) => {\n      const $li = $(li); // Get list item.\n      const $a = $($li.children('a')[0]); // Get the anchor tag within it.\n      if ($a) {\n        // Get the anchor's text. This will be the page title.\n        const text = $a.text();\n        // Expose that text on the list item as an attribute.\n        $li.attr('navigation-item', text);\n      }\n    });\n\n    const navigationPaneHtml = $.html();\n    return navigationPaneHtml;\n  });\n}\n\n\n// WEBPACK FOOTER //\n// ./server/pages/navigationPane.js","import AppShell from './AppShell';\nimport Hello from './Hello';\n\nexport { AppShell, Hello };\n\n\n\n// WEBPACK FOOTER //\n// ./components/Components.jsx","import { Component, h } from 'preact'; // jshint ignore:line\nconst wiki = require('../server/connectors/wiki');\n\n\n/**\n * Side navigation pane\n */\nexport default class BreadcrumbBar extends Component {\n\n  render(props, state) {\n\n    // TODO: Add ' / ' ::before the breadcrumbs.\n    const ancestors = props.ancestors || [];\n    const breadcrumbs = ancestors.map(ancestor => {\n      const title = ancestor.title;\n      const siteUrl = wiki.pageTitleToSiteUrl(title);\n      return (\n        <a href={siteUrl}>{title}</a>\n      );\n    });\n\n    return (\n      <div class=\"breadcrumbs\">{breadcrumbs}</div>\n    );\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/BreadcrumbBar.jsx"],"sourceRoot":""}